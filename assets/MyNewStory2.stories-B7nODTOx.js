import{j as A}from"./jsx-runtime-D_zvdyIk.js";import{a as G}from"./iframe-x4P06hMH.js";import"./preload-helper-D9Z9MdNV.js";var N={},V={},L;function H(){if(L)return V;L=1,Object.defineProperty(V,"__esModule",{value:!0});var c=(function(){function u(e,r){var s=[],a=!0,f=!1,l=void 0;try{for(var p=e[Symbol.iterator](),n;!(a=(n=p.next()).done)&&(s.push(n.value),!(r&&s.length===r));a=!0);}catch(y){f=!0,l=y}finally{try{!a&&p.return&&p.return()}finally{if(f)throw l}}return s}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return u(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),i=G();function x(u){if(Array.isArray(u)){for(var e=0,r=Array(u.length);e<u.length;e++)r[e]=u[e];return r}else return Array.from(u)}var v=function(e,r){var s=(0,i.useRef)(function(){throw new Error("Cannot call an event handler while rendering.")});return(0,i.useEffect)(function(){s.current=e},[e].concat(x(r))),(0,i.useCallback)(function(a){var f=s.current;return f(a)},[s])},t=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.onEnd,s=r===void 0?function(){}:r,a=e.onResult,f=a===void 0?function(){}:a,l=e.onError,p=l===void 0?function(){}:l,n=(0,i.useRef)(null),y=(0,i.useState)(!1),$=c(y,2),g=$[0],m=$[1],P=(0,i.useState)(!1),b=c(P,2),_=b[0],U=b[1],D=function(h){var E=Array.from(h.results).map(function(S){return S[0]}).map(function(S){return S.transcript}).join("");f(E)},W=function(h){h.error==="not-allowed"&&(n.current.onend=function(){},m(!1)),p(h)},R=v(function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(g||!_)){var h=d.lang,E=h===void 0?"":h,S=d.interimResults,j=S===void 0?!0:S,O=d.continuous,q=O===void 0?!1:O,M=d.maxAlternatives,C=M===void 0?1:M,T=d.grammars;m(!0),n.current.lang=E,n.current.interimResults=j,n.current.onresult=D,n.current.onerror=W,n.current.continuous=q,n.current.maxAlternatives=C,T&&(n.current.grammars=T),n.current.onend=function(){return n.current.start()},n.current.start()}},[g,_,n]),o=v(function(){!g||!_||(n.current.onresult=function(){},n.current.onend=function(){},n.current.onerror=function(){},m(!1),n.current.stop(),s())},[g,_,n,s]);return(0,i.useEffect)(function(){typeof window>"u"||(window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,window.SpeechRecognition&&(U(!0),n.current=new window.SpeechRecognition))},[]),{listen:R,listening:g,stop:o,supported:_}};return V.default=t,V}var I={},z;function J(){if(z)return I;z=1,Object.defineProperty(I,"__esModule",{value:!0});var c=(function(){function v(t,u){var e=[],r=!0,s=!1,a=void 0;try{for(var f=t[Symbol.iterator](),l;!(r=(l=f.next()).done)&&(e.push(l.value),!(u&&e.length===u));r=!0);}catch(p){s=!0,a=p}finally{try{!r&&f.return&&f.return()}finally{if(s)throw a}}return e}return function(t,u){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return v(t,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),i=G(),x=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=t.onEnd,e=u===void 0?function(){}:u,r=(0,i.useState)([]),s=c(r,2),a=s[0],f=s[1],l=(0,i.useState)(!1),p=c(l,2),n=p[0],y=p[1],$=(0,i.useState)(!1),g=c($,2),m=g[0],P=g[1],b=function(o){f(o)},_=function(){var o=window.speechSynthesis.getVoices();if(o.length>0){b(o);return}window.speechSynthesis.onvoiceschanged=function(d){o=d.target.getVoices(),b(o)}},U=function(){y(!1),e()};(0,i.useEffect)(function(){typeof window<"u"&&window.speechSynthesis&&(P(!0),_())},[]);var D=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=o.voice,h=d===void 0?null:d,E=o.text,S=E===void 0?"":E,j=o.rate,O=j===void 0?1:j,q=o.pitch,M=q===void 0?1:q,C=o.volume,T=C===void 0?1:C;if(m){y(!0);var w=new window.SpeechSynthesisUtterance;w.text=S,w.voice=h,w.onend=U,w.rate=O,w.pitch=M,w.volume=T,window.speechSynthesis.speak(w)}},W=function(){m&&(y(!1),window.speechSynthesis.cancel())};return{supported:m,speak:D,speaking:n,cancel:W,voices:a}};return I.default=x,I}var B;function K(){return B||(B=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0});var i=H();Object.defineProperty(c,"useSpeechRecognition",{enumerable:!0,get:function(){return v(i).default}});var x=J();Object.defineProperty(c,"useSpeechSynthesis",{enumerable:!0,get:function(){return v(x).default}});function v(t){return t&&t.__esModule?t:{default:t}}})(N)),N}var Q=K();const ee={title:"我的第一個故事"},F=`
  台灣某個夜裡的女子監獄...一個身形高大.黑長髮英氣十足的女性.坐在牢房的地板抽著菸...
  ???-/嗯....嗯?幹...沒菸了.沒辦法...只好出去買了./
  於是女子就這樣走到牢房的欄杆.用她驚人的力氣掰開.直接走了出去...
`,k=()=>{const{speak:c}=Q.useSpeechSynthesis();return A.jsxs("div",{children:[A.jsx("h1",{children:"我的小說（附語音朗讀）"}),A.jsx("button",{onClick:()=>c({text:F}),children:"點我播放故事"}),A.jsx("hr",{}),A.jsx("p",{children:F})]})};k.__docgenInfo={description:"",methods:[],displayName:"MyStoryWithAudio"};k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:`() => {
  // 呼叫 useSpeechSynthesis 函式來啟用語音功能
  const {
    speak
  } = useSpeechSynthesis();
  return <div>\r
      <h1>我的小說（附語音朗讀）</h1>\r
      {/* 建立一個按鈕，當點擊時就朗讀故事內容 */}\r
      <button onClick={() => speak({
      text: storyText
    })}>\r
        點我播放故事\r
      </button>\r
      <hr />\r
      <p>{storyText}</p>\r
    </div>;
}`,...k.parameters?.docs?.source}}};const ne=["MyStoryWithAudio"];export{k as MyStoryWithAudio,ne as __namedExportsOrder,ee as default};
